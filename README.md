# Development of credativ-pg-migrator

Repository contains python solution for migration of the whole database from legacy systems to PostgreSQL.

## Main features

- Pure python solution, uses only staandard libraries, structured in modules, written in object-oriented style
- Supports migration of tables, column constraints, primary keys, indexes, foreign keys from source to target database
- Post migrattion setting of current values of sequences on the target database
- Rudimentary migration of views
- Conversion and migration of functions, procedures, triggers
- Customizable substitutions of data types and default values of columns

## Source databases

- Source database connector must implement DatabaseConnector class from the migrator.database_connector module
- Methods of this class contain descriptions of actions and return values that are expected by the migrator tool
- Solution currently supports these source databases:
  - Sybase ASE
  - Informix

## Target databases

- Target database connector must implement DatabaseConnector class from the migrator.database_connector module
- Solution currently supports only PostgreSQL as target database

## Migration database

- Solution uses a migration database to store metadata about the migration process
- Migration database is a PostgreSQL database, credentials must be configured in the configuration file
- In most cases we assume that the migration database will the same as the target database, but it is possible to use a different database from the same or different PostgreSQL server

## Todo

- Add richer support for views
- Most likely not all constrains are covered
- Add support for PostgreSQL as source database

## Structure of the repository

The repository is structured as follows:

- config - Contains different configuration files for the migrator tool
- lib - Contains different libraries used by the migrator tool - java jdbc drivers, C++ client libraries, etc.
- logs - Contains log files generated by the migrator tool
- migrator - Contains the main codebase for the migrator tool
- migrator_venv - Contains the virtual environment for the migrator tool - not included in the repository, must be created locally using script ./setup_env.sh
- poc - Contains multiple isolated scripts for testing different functionalities of the migrator tool during development
- scripts - Contains different bash scripts for the migrator tool
- sql - Contains SQL scripts for creating tables and inserting data into the source database
- tests - Contains test cases for the migrator tool
